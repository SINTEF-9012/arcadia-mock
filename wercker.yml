
box: python:2.7

build:
  steps:
    - virtualenv:
        name: Setup virtual environment
        install_wheel: false 

    - pip-install:
        name: Install Python packages
        packages_list: "codecov"

    - script:
        name: Test & Upload code coverage
        code: |
           pip install -e .        # Install arcadiamock locally
           python -m site
           echo "import coverage; coverage.process_startup()" > $HOME/venv/lib/python2.7/site-packages/sitecustomize.py 
           coverage run setup.py test
           coverage combine
           codecov      
           cat acceptance.log
